<!doctype html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="dist/index.css" rel="stylesheet">
  <title>MicheCSS | sidebar-mobile</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/prism.min.js"></script>
  <script>
    const escapeChars = {
      '¢': 'cent',
      '£': 'pound',
      '¥': 'yen',
      '€': 'euro',
      '©': 'copy',
      '®': 'reg',
      '<': 'lt',
      '>': 'gt',
      '"': 'quot',
      '&': 'amp',
      '\'': '#39'
    };

    let regexString = '[';
    for (let key in escapeChars) {
      regexString += key;
    }
    regexString += ']';

    const regex = new RegExp(regexString, 'g');

    function escapeHTML(str) {
      return str.replace(regex, (m) => '&' + escapeChars[m] + ';');
    };

    function hideSidebar(sidebar){
      const params=location.search.slice(1).split('&');
      if(params.includes('hideSidebar=true'))
      sidebar.classList.add("hidden");
    }

    function onLoad() {
      const sidebar = document.getElementById("sidebar-mobile-container");

      hideSidebar(sidebar);

      const code = document.getElementById('code');

      const htmlEntities = escapeHTML(sidebar.outerHTML)
      code.innerHTML = htmlEntities;

      Prism.highlightAll();

      const firstSection = document.querySelectorAll("[data-section='1']");
      const secondSection = document.querySelectorAll("[data-section='2']");
      const slideNext = document.getElementsByClassName("is-selected")[0];
      const slideBack = document.getElementsByClassName("slide-back")[0];

      function handleSlideBack(e) {
        firstSection.forEach(section => section.classList.remove("hidden"));
        secondSection.forEach(section => section.classList.add("hidden"));
      }

      function handleSlideNext(e) {
        firstSection.forEach(section => section.classList.add("hidden"));
        secondSection.forEach(section => section.classList.remove("hidden"));
        slideBack.addEventListener("click", handleSlideBack)
      }
      slideNext.addEventListener("click", handleSlideNext)

    }
    window.addEventListener('load', onLoad)
  </script>
</head>
<body>
  <div class="relative bg-white h-full">
    <div id="sidebar-mobile-container" class="sidebar-mobile-container">
      <div class="sidebar">
        <div class="flex items-center justify-between pt-5 px-5">
          <div>
            <img class="h-8 w-auto" src="src/assets/img/logo-mobile.svg" alt="ctrl^">
          </div>
          <div class="flex">
            <div class="mr-4">
              <button type="button" class="btn-sb-header">
                <span class="text-white">(0)</span>
                <img class="ml-2" src="src/assets/img/bell.svg" alt="Notificaciones">
              </button>
            </div>
            <div class="-mr-2 self-center">
              <button type="button" class="btn-sb-header">
                <span class="sr-only">Close menu</span>
                <img class="" src="src/assets/img/x-gray.svg" alt="Cerrar">
              </button>
            </div>
          </div>
        </div>
        <div data-section="1" class="menu-items">
          <nav class="items">
            <a href="#" class="item slide-next is-selected">
              <img class=" selected-icon" src="src/assets/img/icon-heart.svg" alt="link01">
              <span class="ml-3 text-base">
                link01
              </span>
            </a>
            <a href="#" class="item slide-next">
              <img class="" src="src/assets/img/icon-users.svg" alt="link02">
              <span class="ml-3 text-base">
                link02
              </span>
            </a>

            <a href="#" class="item slide-next">
              <img class="" src="src/assets/img/icon-chart-bar.svg" alt="link03">
              <span class="ml-3 text-base">
                link03
              </span>
            </a>
            <a href="#" class="item slide-next">
              <img class="" src="src/assets/img/icon-envelop.svg" alt="link04">
              <span class="ml-3 text-base">
                link04
              </span>
            </a>
          </nav>
        </div>
        <div data-section="2" class="submenu-links hidden">
          <nav class="items">
            <a href="#" class="item slide-back">
              <img class="" src="src/assets/img/icon-dashboard.svg" alt="link01">
              <span class="ml-3 text-base ">
                link01
              </span>
            </a>
            <a href="#" class="item sub-link is-selected">
              <img class="" src="src/assets/img/icon-users.svg" alt="link02">
              <span class="ml-3 text-base">
                link02
              </span>
            </a>
            <a href="#" class="item sub-link">
              <img class="" src="src/assets/img/icon-calendar.svg" alt="link03">
              <span class="ml-3 text-base">
                link03
              </span>
            </a>
            <a href="#" class="item sub-link">
              <img class="" src="src/assets/img/icon-calendar.svg" alt="link04">
              <span class="ml-3 text-base">
                link04
              </span>
            </a>
          </nav>
        </div>
        <div data-section="1" id="submenu-items" class="submenu-items">
          <nav class="items">
            <a href="#" class="sub-item">
              <img class="" src="src/assets/img/icon-user.svg" alt="link05">
              <span class="ml-3">
                link05
              </span>
            </a>
            <a href="#" class="sub-item">
              <img class="" src="src/assets/img/icon-edit.svg" alt="link06">
              <span class="ml-3">
                link06
              </span>
            </a>
            <a href="#" class="sub-item is-selected">
              <img class="selected-icon" src="src/assets/img/icon-switchprof.svg" alt="link07">
              <span class="ml-3">
                link07
              </span>
            </a>
            <a href="#" class="sub-item">
              <img class="" src="src/assets/img/icon-logout.svg" alt="link08">
              <span class="ml-3">
                link08
              </span>
            </a>
          </nav>
        </div>
      </div>
    </div>
    <div class="pt-6">
      <h4 class="text-center mb-6"> Change the screen dimensions to display the sidebar</h4>
      <div class="h-5/6">
        <pre class="code">
        <code id="code" class="language-markup"></code>
      </pre>
      </div>
    </div>
  </div>
</body>
</html>
